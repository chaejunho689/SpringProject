<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="user.dao.UserUploadDAO">

	<!-- SQL문을 실행할 때 넘어오는 파라미터 타입이 List일 경우 forEach 태그의 collection 속성에 사용할 수 
		있는 이름은 list 또는 collection에 가능하다. -->

	<insert id="upload">
		insert into userUpload(imageName, imageContent, imageFileName,
		imageOriginalFileName)
		values
		<foreach collection="list" item="dto" separator=",">
			(#{dto.imageName}, #{dto.imageContent}, #{dto.imageFileName},
			#{dto.imageOriginalFileName})
		</foreach>
	</insert>

	<!-- 목록 -->
	<select id="uploadList" resultType="user.bean.UserUploadDTO">
		select * from userUpload
		order by seq desc
	</select>

	<!-- 1개 이미지 -->
	<select id="getUploadDTO" parameterType="String" resultType="user.bean.UserUploadDTO">
		select * from userUpload where seq=#{seq}
	</select>

	<!-- ImageFileName 열기 -->
	<select id="getImageFileName" parameterType="int" resultType="String">
		select imageFileName from userUpload where seq = #{seq}
	</select>

	<!-- 수정 -->
	<update id="uploadUpdate" parameterType="UserUploadDTO"> 
		update userUpload set 	  imageName=#{imageName}
								, imageContent=#{imageContent}
								, imageFileName=#{imageFileName}
								, imageOriginalFileName=#{imageOriginalFileName}
		where seq=#{seq}
	</update>
	
	<!-- 삭제 -->
	<delete id="uploadDelete" parameterType=""> 
		delete userUpload where seq in 
		<foreach collection="list" item="str" open="("  close=")" separator=",">
			#{seq} 
		</foreach>
	</delete>
</mapper>